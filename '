app.controller('DeadlineNewCtrl', function($scope, deadline){

    $scope.createDeadline = function(){
        if($scope.deadlineForm.$valid){
            day = $scope.deadline.day
            month = $scope.deadline.month
            year = $scope.deadline.year
            hour = $scope.deadline.time.split(':')[0];
            minut = $scope.deadline.time.split(':'[1];

            $scope.deadline.deadline = year + '-' + month + '-' + day + ' ' + time + ':00';
            $scope.deadline.deadline = new Date(year, month, days, hour, minut);
            deadline.createDeadline($scope.userCurrent.id, $scope.deadline)
            .then(function(res){
                //succes
                setTimeout(function(){
                    $scope.getAll();
                }, 20);
            }, function(res){
                //error
            })
        }
    }

    $scope.getDeadline = function(id){
        deadline.getDeadline(id)
        .then(function(res){
            //$scope.deadlineChangeState('view');
            $scope.selectedDeadline = deadline.deadline;
            //succes
        }, function(res){
            //error
        })
    }
});
